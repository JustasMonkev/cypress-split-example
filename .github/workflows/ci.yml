name: ci

on:
  push:
    branches:
      - main

jobs:
  # Run Cypress tests on mobile environment in parallel
  mobile:
    runs-on: ubuntu-20.04
    strategy:
      matrix:
        environment: [mobile]
        test: [A1, A2, A3]
    steps:
      - name: Checkout ðŸ›Ž
        uses: actions/checkout@v2

      - name: Run Cypress tests on mobile ðŸ§ª
        # https://github.com/cypress-io/github-action
        uses: cypress-io/github-action@v5
        with:
          browser: chrome
          headless: true
        env:
          CYPRESS_test: ${{ matrix.test }}
          CYPRESS_environment: ${{ matrix.environment }}

  # Run Cypress tests on desktop environment in parallel
  desktop:
    runs-on: ubuntu-20.04
    strategy:
      matrix:
        environment: [desktop]
        test: [A1, A2, A3]
    steps:
      - name: Checkout ðŸ›Ž
        uses: actions/checkout@v2

      - name: Run Cypress tests on desktop ðŸ§ª
        # https://github.com/cypress-io/github-action
        uses: cypress-io/github-action@v5
        with:
          browser: chrome
          headless: true
        env:
          CYPRESS_test: ${{ matrix.test }}
          CYPRESS_environment: ${{ matrix.environment }}
